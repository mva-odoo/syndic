<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<!--search -->
		<record model="ir.ui.view" id="search_mutation">
			<field name="name">Mutation search</field>
			<field name="model">syndic.mutation</field>
			<field name="type">search</field>
			<field name="arch" type="xml">
				<search string="mutation">
                    <field name="mutation_date"/>
                    <field name="immeuble_id"/>
				</search>
			</field>
		</record>
        
		<!--tree view -->
		<record model="ir.ui.view" id="tree_mutation">
			<field name="name">Mutation tree view</field>
			<field name="model">syndic.mutation</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="mutation">
                    <field name="mutation_date"/>
					<field name="old_owner_id"/>
				    <field name="new_owner_id"/>
				    <field name="immeuble_id"/>
				</tree>
			</field>
		</record>


		<!--form -->
		<record model="ir.ui.view" id="form_mutation">
			<field name="name">Mutation form view</field>
			<field name="model">syndic.mutation</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="mutation" layout="manual" version="7.0">
				<header>
					<button string="Mutation" name="mutation_ok" type="object" attrs="{'invisible':[('state','=','done')]}" />
					<field name="state" widget="statusbar"/>
				</header>
				<sheet string="Mutation" layout="auto">
				    <group>
				    <field name="mutation_date" attrs="{'readonly':[('state','=','done')]}"/>
				    <field name="old_owner_id" attrs="{'readonly':[('state','=','done')]}"/>
				    <field name="new_owner_id" attrs="{'readonly':[('state','=','done')]}"/>
				    <separator string="Lots modifiÃ©s" colspan="4"/>
				    <field name="lot_ids" domain="[('proprio_id','in',old_owner_id)]" attrs="{'readonly':[('state','=','done')]}" colspan="4" nolabel="1">
				    	<tree>
				    		<field name="name"/>
				    		<field name="building_id"/>
				    	</tree>
				    </field>
				    
                    </group>
                </sheet>
                </form>
			</field>
		</record>
               
		<!--action -->
		<record model="ir.actions.act_window" id="action_mutation">
			<field name="name">Mutation</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">syndic.mutation</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="tree_mutation" />
			<field name="search_view_id" ref="search_mutation" />
		</record>

	</data>
</openerp>
