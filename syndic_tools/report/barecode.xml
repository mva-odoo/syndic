<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
        <record id="barcode_paperformat" model="report.paperformat">
            <field name="name">Barcode</field>
            <field name="format">custom</field>
            <field name="page_height">28</field>
            <field name="page_width">89</field>
            <field name="orientation">Portrait</field>
            <field name="margin_top">5</field>
            <field name="margin_bottom">0</field>
            <field name="margin_left">0</field>
            <field name="margin_right">0</field>
            <field name="dpi">90</field>
        </record>

        <template id="barcode_default">
            <t t-set="web_url" t-value="docs.env['ir.config_parameter'].sudo().get_param('web.base.url', default='')"/>
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="o">
                    <div class="page">
                        <div class="barcode" style="max-height:50pt;max-width:100%;text-align: center;">
                            <img 
                                alt="barcode"
                                t-if="o.code"
                                t-att-src="'%s/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s&amp;humanreadable=1' % (web_url, 'Code128', o.code, 600, 120)"
                                align="center"
                            />
                        </div>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>